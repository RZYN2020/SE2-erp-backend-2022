# Lab2

## 小组成员信息及分工

首先小组四位成员都各自制作了完整的ERP系统的用例图，经过讨论之后得出了统一的当前版本。其中库存模块共有5个用例，用例描述分工完成。

201250175 杨峥 用例图，库存处理用例描述

201250176 何浩达 用例图，库存分析用例描述

201250178 赵勇臻 用例图，商品分类管理和商品管理用例描述

201250179 张岳轩 用例图，库存调整用例描述

## 用例图

![use-case](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250178-ERP-USE-CASE.png)

## 用例描述

### 商品分类管理

| 项目     | 内容描述                                                     |
| -------- | ------------------------------------------------------------ |
| ID       | ERP.Inventory.ProductCategoryManagement                      |
| 名称     | 商品分类管理。商品分类功能包括增加分类，删除分类，修改分类。增加一个分类时，系统应自动给该分类生成一个编号，只有叶节点的分类才能添加商品，一旦分类（或者子分类）下有商品就不能在该分类下再添加子分类。 |
| 参与者   | 库存管理人员                                                 |
| 触发条件 | 库存管理人员进入商品分类管理页面，准备进行分类的增加，删除，修改操作 |
| 前置条件 | 库存管理人员已经被识别和授权                                 |
| 后置条件 | 更新系统中商品分类信息                                       |
| 正常流程 | 1. 系统显示商品分类管理页面，页面中有一个包含所有分类的树状图，树状图个分类节点上都有增加(即增加其子分类)，删除，修改选项按钮 <br>2. 用户点击其中一个按钮，选则三种操作之一<br>3. 如果用户对某个分类节点选择删除操作<br>3.1. 该节点的分类连同其所有子分类一并被删除，流程结束<br>4. 如果用户对某个节点选择修改操作<br>4.1.则下一步输入要修改的分类属性，确认后修改完成，流程结束<br>5. 如果用户对某个节点选择添加子分类节点操作<br>5.1. 下一步输入新分类的相关属性<br>5.2. 输入相关属性后，系统自动为该分类生成编号(所有编号互异且每一个编号对应唯一一个分类)，并将该分类添加到分类信息中，流程结束。 |
| 扩展流程 | 1a. 有一个不代表任何实际分类的根节点分类，所有分类节点都是该根节点的子孙，只能对根节点进行添加子节点操作。<br>3a. 如果该分类是根节点，则只删除其所有子节点<br>4a. 如果该分类是根节点，则系统提示错误并拒绝添修改<br>5a. 如果该分类下有商品，则系统提示错误并拒绝添加子分类 |
| 特殊需求 | 6a. 编号应该能反应分类的层级关系。                           |

### 商品管理

| 项目     | 内容描述                                                     |
| -------- | ------------------------------------------------------------ |
| ID       | ERP.Inventory.ProductManagement                              |
| 名称     | 商品管理，进行商品的增加，删除，修改或查询操作，其中创建和修改的属性有：编号、名称、型号、库存数量、进价、零售价、最近进价、最近零售价、生产日期。 |
| 参与者   | 库存管理人员                                                 |
| 触发条件 | 库存管理人员进入商品管理页面，准备进行商品的增加，删除，修改或查询操作 |
| 前置条件 | 库存管理人员已经被识别和授权                                 |
| 后置条件 | 更新系统中商品信息                                           |
| 正常流程 | 1. 系统显示商品管理页面，页面中有一个包含所有分类的树状图，树状图的叶节点可以被点击。页面也包含一个搜索框<br/>2. 如果用户在搜索框内输入查询内容(输入关键字或商品编号)<br>2.1. 系统进行模糊查找，以表格形式列出所有匹配商品，流程结束<br>3. 如果用户点击其中一个叶节点<br/>3.1. 系统以表格形式显示属于该叶节点分类下的所有商品以及相应属性，表格上部有增加按钮，每个商品项旁都有删除，修改两个按钮<br/>3.1.1. 如果用户对某个节点选择修改操作<br>3.1.1.1输入要修改的分类属性，确认后修改完成，流程结束<br/>3.1.2. 如果用户对某个节点选择删除操作<br>3.1.2.1 系统删除该商品，流程结束<br/>3.1.3 如果用户选择增加按钮<br>3.1.3.1 用户输入所添加商品的属性(名称、型号、库存数量、进价、零售价、生产日期<br>3.1.3.2 系统添加该商品并自动为该商品生成编号，流程结束 |
| 扩展流程 | 2.1a. 表格中每项商品显示所有属性:(编号、名称、型号、库存数量、进价、零售价、最近进价、最近零售价、生产日期)，同时表格中每项商品也可以进行修改和删除操作<br>3.1.3.1a. 最近零售价与最近进价刚开始以进价和零售价为默认值。 |
| 特殊需求 | 3.1.3.2a. 商品编号根据其所在的分类以及添加次序生成。         |



### 库存模块用例描述

| 项目     | 内容描述                                                     |
| -------- | :----------------------------------------------------------- |
| ID       | ERP.Inventory.Handing                                        |
| 名称     | 库存处理时生成相应单据，通过审批后进行处理，包括入库、出库或者赠送商品。从供应商那里进一批货或者销售后客户退一批货都是一次入库，入库单包含时间、操作员、入库类型（进货/买家退货）、这批商品的具体信息；为了减库存退掉一批已经从供应商那里进的货或者售出一批货都是一次出库， 出库单包含时间、操作员、出库类型（减库存/销售）、这批商品的具体信息；当实际库房中的商品数量比系统中的多时要进行库存报溢，向系统库存中添加商品使一致。 |
| 参与者   | 库存管理人员，目标是正确的完成库存处理操作。                 |
| 触发条件 | 入库处理：供货商向库房发送进货申请、客户发出退货申请；<br />出库处理：需要向供货商退货、客户申请购买；<br />恰当时机需要赠送商品。 |
| 前置条件 | 库存管理人员已经被识别和授权。                               |
| 后置条件 | 系统中的库存数据自动更改。                                   |
| 正常流程 | 1. 供货商向库房发送进货申请，其提供的进货单在完成审批后，仓库管理人员会根据收到的消息完成进货，并自动生成入库单——包含时间、操作员、入库类型（进货）、这批商品的具体信息。<br />2. 客户发出退货申请，其提供的销售退货单在完成审批后，仓库管理人员会根据收到的消息完成进货，并自动生成入库单——包含时间、操作员、入库类型（买家退货）、这批商品的具体信息。<br />3. 为了减库存，退掉一批已经从供应商那里进的货，根据退货情况生成进货退货单，完成审批后仓库管理人员会根据收到的消息完成出货，并自动生成出库单——包含时间、操作员、出库类型（减库存）、这批商品的具体信息。<br />4. 售出一批货，根据出售情况生成销售单，完成审批后仓库管理人员会根据收到的消息完成出货，并自动生成出库单——包含时间、操作员、出库类型（销售）、这批商品的具体信息，。<br />5. 在恰当时机，如节假日或有库存积压情况，选择一些库存中的商品进行赠送，由赠送策略自动生成库存赠送单，提交后从库存中减去这些商品。 |
| 扩展流程 | 1a. 如果审批不通过，则不进货。<br />2a. 如果审批不通过，则不进货。<br />3a. 如果审批不通过，则不出货。<br />4a. 如果审批不通过，则不出货。<br /> |
| 特殊需求 | 1. 出库单、入库单的格式要统一，如时间格式、商品具体信息条目应一致。<br />2. 系统内人员中，仅应总经理和库存管理人员对上述表单有查看权限。 |

### 库存分析

| 项目     | 内容描述                                                     |
| -------- | ------------------------------------------------------------ |
| ID       | ERP.Inventory.Analysis                                       |
| 名称     | 对库存进行分析，包括库存查看和库存盘点。库存查看通过设定时间段查看此时间段内的出/入库数量/金额/商品信息/分类信息，并对库存数量进行合计。库存盘点的对象是当天的库存快照，包括当天的各种商品的名称，型号，库存数量，库存均价（商品的平均进价），批次批号，生产日期，并且显示行号。 |
| 参与者   | 库存管理人员，目标是对库存信息进行分析                       |
| 触发条件 | 库存管理人员准备开始对库存进行查看和盘点                     |
| 前置条件 | 库存管理人员已经被识别和授权                                 |
| 后置条件 | 仓库实际库存与系统记录库存数量不符时，生成库存报溢单或库存报损单，进行库存调整；仓库库存数量过低时，生成库存报警单提醒库存管理员 |
| 正常流程 | 1. 如果进行库存查看，库存管理员自主选择需要查看库存信息的时间段，并点击“查看库存”<br/>2. 系统识别时间段，并在数据库中将此时间段内的出/入库数量/金额/商品信息/分类信息选择出来，形成表格<br/>3. 系统对此时间段结束时的的库存数量进行合计<br/>4. 系统将根据时间段选择出的库存信息显示于系统页面，供库存管理人员查看<br/>5. 如果进行库存盘点，由库存管理人员选择“库存盘点”<br/>6. 系统受到库存盘点请求，立即在系统数据库中获取当天的各种商品的名称、型号、库存数量、库存均价（商品的平均进价）、批次批号、生产日期，并且显示行号<br/>7. 系统将获取到的库存快照形成表格的形式，提供给库存管理人员<br/>8. 库存管理人员此时可以选择将库存快照表格以Excel的形式导出并保存到本地<br/>9. 如果库存管理人员选择“导出为Excel格式”，系统将库存快照表格转为Excel表格，并保存到指定路径 |
| 扩展流程 | 1a.库存管理员未选择查看的时间段就点击“查看库存”，系统提示“未选择要查看的时间段”，并拒绝库存管理员发起的查看库存操作<br/>1b.管理员输入的时间段不在系统数据库允许的时间范围内，系统提示“当前选择时间错误”，并拒绝库存管理员发起的查看库存操作<br/>2a.选择的时间段内无库存信息，则返回一个空白表格<br/>9a.库存管理员选择将当前库存快照导出到本地保存，默认为保存到默认路径下；库存管理员也可以为导出的Excel表格选择指定的保存路径 |
| 特殊需求 | 1. 通过库存查看和库存盘点得到的库存商品信息表格必须要在最后标注库存总数、操作员(此处为本库存管理人员)身份信息、信息导出具体时间，以供后续人员使用与查验 <br/>2. 库存快照导出Excel表格默认命名为：“日期+时间+库存盘点信息” |

### 库存调整

| 项目     | 内容描述                                                     |
| -------- | ------------------------------------------------------------ |
| ID       | ERP.Inventory.Adjust                                         |
| 名称     | 库存调整：当实际库房中的商品数量与系统不一致时，库存管理人员操作系统生成报溢/报损单以调整系统库存 |
| 参与者   | 库存管理人员                                                 |
| 触发条件 | 库存管理人员进入库存调整页面                                 |
| 前置条件 | 库存管理人员已经被识别和授权                                 |
| 后置条件 | 更新系统中库存信息                                           |
| 正常流程 | 1. 系统显示库存调整页面，并提示用户选择报溢或者报损。<br />2.1 用户选择报溢或报损<br />2.2 系统显示库存中的商品信息并让用户进行选择<br />2.3 用户选中商品并输入新的库存数量<br />重复以上两步直到用户修改完所有库存信息<br />2.4 用户点击生成报溢/报损单<br />2.5 系统自动生成报溢/报损单并展示给用户，提示用户确认或返回继续修改<br />2.6 用户点击确认<br />2.7 系统将生成的表单加入待审批表单中<br /> |
| 扩展流程 | 2.6a. 用户点击返回继续修改则重复2.2之后的步骤                |
| 特殊需求 |                                                              |

### 库存报警

| 项目     | 内容描述                                                     |
| -------- | ------------------------------------------------------------ |
| ID       | ERP.Inventory.Alarm                                          |
| 名称     | 库存报警：库存管理人员可以设定警戒值，当系统中的库存数量低于警戒数量时系统会自动向仓库管理员发送消息 |
| 参与者   | 库存管理人员                                                 |
| 触发条件 | 库存管理人员进入系统                                         |
| 前置条件 | 库存管理人员已经被识别和授权                                 |
|          |                                                              |
| 正常流程 | 1. 仓库管理人员进入系统选择库存警戒值设置<br />2. 系统展示设置界面并提示用户输入<br />3. 用户输入新的警戒值<br />4. 系统提示用户确认<br />5. 用户确认后系统显示新的警戒值 |
| 扩展流程 | 1.a 仓库管理员进入系统后，如果系统中的库存数量已经低于之前设定的警戒值，系统发送弹窗，显示当前库存数量和警戒值<br />1.a.1 用户点击确认消息，系统关闭弹窗但在主菜单显示警戒符号<br />系统不断显示警戒符号，直到库存修改/警戒值修改时检查当前库存且该库存值高于警戒值 |
| 特殊需求 | 系统向仓库管理员发送的消息要以浮动窗口的形式持续显示         |
